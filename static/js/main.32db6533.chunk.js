(this["webpackJsonp02-firebase-redux-react"]=this["webpackJsonp02-firebase-redux-react"]||[]).push([[0],{32:function(e,t,a){e.exports=a(50)},41:function(e,t,a){},50:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),s=a(19),c=a.n(s),i=a(9),l=(a(41),a(10)),o=a(29),u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.typeof){case"REGISTER_REQUEST":return{registering:!0};case"REGISTER_SUCCESS":case"REGISTER_FAILURE":return{};default:return e}},m=localStorage.getItem("email"),d=m?{loggedIn:!0,user:m}:{},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN_REQUEST":case"LOGIN_SUCCESS":return{loggedIn:!0,user:t.user};case"LOGIN_FAILURE":case"LOGOUT":return{};default:return e}},p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ALERT_SUCCESS":return{type:"alert-success",message:t.message};case"ALERT_ERROR":return{type:"alert-danger",message:t.message};case"ALERT_CLEAR":return{};default:return e}},b=Object(l.c)({registrationReducer:u,authenticationReducer:g,alertReducer:p}),h=Object(l.d)(b,Object(l.a)(o.a)),E=a(12),f=a(13),v=a(16),R=a(15),S=a(3),O=a(5),y=Object(O.b)(),j=a(31),w=function(e){var t=e.component,a=Object(j.a)(e,["component"]);return n.a.createElement(S.b,Object.assign({},a,{render:function(e){return localStorage.getItem("email")?n.a.createElement(t,e):n.a.createElement(S.a,{to:"/login"})}}))},C=a(14),I=a(8),N=a(30),L=(a(48),N.initializeApp({apiKey:"AIzaSyAMtZa_T7v3ZXspkVB7bbdXzjE2ymZsZj4",authDomain:"fir-react-auth-8ee30.firebaseapp.com",databaseURL:"https://fir-react-auth-8ee30.firebaseio.com",projectId:"fir-react-auth-8ee30",storageBucket:"fir-react-auth-8ee30.appspot.com",messagingSenderId:"785008082425",appId:"1:785008082425:web:38282fc89b919dc080d128"})),A={register:function(e){return L.auth().createUserWithEmailAndPassword(e.email,e.password).then((function(e){return e.user.email})).catch((function(e){return Promise.reject(e)}))},login:function(e,t){return L.auth().signInWithEmailAndPassword(e,t).then((function(e){return localStorage.setItem("email",e.user.email),e})).catch((function(e){return Promise.reject(e)}))},logout:function(){L.auth().signOut().then((function(){console.log("Signed out")})),localStorage.removeItem("email")}};var _={success:function(e){return{type:"ALERT_SUCCESS",message:e}},error:function(e){return{type:"ALERT_ERROR",message:e}},clear:function(){return{type:"ALERT_CLEAR"}}},T={register:function(e){return function(t){A.register(e).then((function(e){t(function(e){return{type:"REGISTER_SUCCESS",user:e}}()),y.push("/login"),t(_.success("Registration successful ".concat(e)))}),(function(e){t(function(e){return{type:"REGISTER_FAILURE",error:e}}(e.message)),t(_.error(e.message))}))}},login:function(e,t){return function(a){A.login(e,t).then((function(e){a(function(e){return{type:"LOGIN_SUCCESS",user:e}}(e)),y.push("/")}),(function(e){a(function(e){return{type:"LOGIN_FAILURE",error:e}}(e.message)),a(_.error(e.message))}))}},logout:function(){return A.logout(),{type:"LOGOUT"}}};var U=function(e){Object(v.a)(a,e);var t=Object(R.a)(a);function a(e){var r;return Object(E.a)(this,a),(r=t.call(this,e)).handleChange=function(e){var t=e.target,a=t.name,n=t.value;r.setState(Object(C.a)({},a,n))},r.handleSubmit=function(e){e.preventDefault(),r.setState({submitted:!0});var t=r.state,a=t.email,n=t.password;a&&n&&r.props.login(a,n)},r.state={email:"",password:"",submitted:!1},r.props.logout(),r}return Object(f.a)(a,[{key:"render",value:function(){var e=this.state,t=e.email,a=e.password,r=e.submitted,s=this.props.alert;return n.a.createElement("div",{className:"shadow col-sm-6 col-lg-4 border p-5"},s.message&&n.a.createElement("div",{className:"alert ".concat(s.type)},s.message),n.a.createElement("h1",null,"Login"),n.a.createElement("form",{onSubmit:this.handleSubmit},n.a.createElement("label",{className:"d-block mb-3"},"Email",n.a.createElement("input",{type:"email",onChange:this.handleChange,value:t,name:"email",className:"form-control"+(r&&!t?" is-invalid":""),placeholder:"Enter email"}),r&&!t&&n.a.createElement("div",{className:"invalid-feedback"},"Email is required")),n.a.createElement("label",{className:"d-block mb-3"},"Password",n.a.createElement("input",{type:"password",onChange:this.handleChange,value:a,name:"password",className:"form-control"+(r&&!a?" is-invalid":""),placeholder:"Password"}),r&&!a&&n.a.createElement("div",{className:"invalid-feedback"},"Password is required")),n.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Login"),n.a.createElement(I.a,{to:"/register",className:"btn text-primary"},"Register")))}}]),a}(r.Component),k={login:T.login,logout:T.logout},G=Object(i.b)((function(e){return{alert:e.alertReducer,loggedIn:e.authenticationReducer.loggedIn}}),k)(U),P=a(25),x=function(e){Object(v.a)(a,e);var t=Object(R.a)(a);function a(){var e;return Object(E.a)(this,a),(e=t.call(this)).handleChange=function(t){var a=t.target,r=a.name,n=a.value,s=e.state.user;e.setState({user:Object(P.a)(Object(P.a)({},s),{},Object(C.a)({},r,n))})},e.handleSubmit=function(t){t.preventDefault(),e.setState({submitted:!0});var a=e.state.user;a.email&&a.password&&e.props.register(a)},e.state={user:{email:"",password:""},submitted:!1},e}return Object(f.a)(a,[{key:"render",value:function(){var e=this.state,t=e.user,a=e.submitted,r=this.props.alert;return n.a.createElement("div",{className:"shadow col-sm-6 col-lg-4 border p-5"},r.message&&n.a.createElement("div",{className:"alert ".concat(r.type)},r.message),n.a.createElement("h1",null,"Register"),n.a.createElement("form",{onSubmit:this.handleSubmit},n.a.createElement("label",{className:"d-block mb-3"},"Email",n.a.createElement("input",{type:"email",onChange:this.handleChange,value:t.email,name:"email",className:"form-control"+(a&&!t.email?" is-invalid":""),placeholder:"Email"}),a&&!t.email&&n.a.createElement("div",null,"Email is required")),n.a.createElement("label",{className:"d-block mb-3"},"Password",n.a.createElement("input",{type:"password",onChange:this.handleChange,value:t.password,name:"password",className:"form-control"+(a&&!t.password?" is-invalid":""),placeholder:"Password"}),a&&!t.password&&n.a.createElement("div",{className:"invalid-feedback"},"Password is required")),n.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Register"),n.a.createElement(I.a,{to:"/login",className:"btn text-primary"},"Cancel")))}}]),a}(r.Component),q={register:T.register},F=Object(i.b)((function(e){return{alert:e.alertReducer,registering:e.registrationReducer.registering}}),q)(x);var Z=function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement(I.a,{className:" btn btn-primary btn-logout",to:"/login"},"Logout"),n.a.createElement("h1",null,"Welcome to Member page"))},z=function(e){Object(v.a)(a,e);var t=Object(R.a)(a);function a(e){var r;return Object(E.a)(this,a),r=t.call(this,e),y.listen((function(e,t){r.props.clearAlerts()})),r}return Object(f.a)(a,[{key:"render",value:function(){return n.a.createElement("div",{className:"d-flex justify-content-center align-items-center h-100 position-relative"},n.a.createElement(S.c,{history:y},n.a.createElement(S.d,null,n.a.createElement(w,{exact:!0,path:"/",component:Z}),n.a.createElement(S.b,{path:"/login",component:G}),n.a.createElement(S.b,{path:"/register",component:F}))))}}]),a}(r.Component),D={clearAlerts:_.clear},W=Object(i.b)((function(e){return{alertReducer:e.alertReducer}}),D)(z);c.a.render(n.a.createElement(i.a,{store:h},n.a.createElement(W,null)),document.querySelector("#root"))}},[[32,1,2]]]);
//# sourceMappingURL=main.32db6533.chunk.js.map